淘宝天猫互通登录原理

1.什么是sso（Single Sign On）？
在多个系统中，用户只需一次登录，各个系统即可感知该用户已经登录。

2.多系统登录的问题与解决
问题：
session不共享问题
cookie不跨域

解决：
session是服务端用来记录用户登录信息的，多系统中可以将用户信息存到redis中，用redis模拟session。
cookie是浏览器发起请求是携带的登录信息，可以放到一个统一的域名下，即用CAS。

3.CAS原理
CAS（Central Authentication Service）就是上面提到的用来解决cookie跨域的中心系统服务，需要作为一个独立的子系统存在。

原理如下：
1.用户第一次打开A页面向CAS发起请求询问登录态，请求中携带自己的地址，CAS发现请求中没有携带cookie就重定向到中心系统登录页，用户输入账户密码登录以后重定向到A的地址，并携带token，A拿到token，存在本地，向A系统发起验证请求，A系统拿到token去CAS验证，如果验证通过，创建局部会话，这样用户在A系统就有了登录态。

2.用户第一次打开B页面向CAS发起请求询问登录态，请求中携带自己的地址，CAS发现请求中有携带cookie就重定向回到B的地址，并携带token，B拿到token，存在本地，向B系统发起验证请求，B系统拿到token去CAS验证，如果验证通过，创建局部会话，这样用户在B系统就有了登录态。

以上，两个系统既共享登录态（CAS的cookie），又有自己独立的会话信息（局部会话token）。